<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eichh√∂rnchen Sortierspiel</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: white;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .game-shell {
      width: 100%;
      max-width: 1100px;
      aspect-ratio: 16/9;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      overflow: hidden;
      position: relative;
    }

    /* TOP FOREST AREA */
    .forest-area {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 65%;           /* a bit more space for forest */
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }

    .forest-area img {
      width: 90%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }

    /* BOTTOM ANIMAL BAR */
    .bottom-row {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 35%;
      display: flex;
      flex-wrap: wrap;        /* ensures all fit without overlap */
      justify-content: center;
      align-items: center;
      gap: 10px;
      padding: 8px;
      background: white;
    }

    .card {
      width: 120px;
      height: 120px;
      cursor: grab;
      user-select: none;
      touch-action: none;
      flex-shrink: 0;
    }

    .card img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      pointer-events: none;
    }

    .card.dragging {
      transform: scale(1.1);
      z-index: 999;
    }

    /* Popup */
    .feedback-overlay {
      position: absolute;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }

    .feedback-overlay img {
      width: 30%;
      max-width: 220px;
      cursor: pointer;
      pointer-events: auto;
      user-select: none;
    }
  </style>
</head>
<body>

<div class="game-shell" id="game-shell">

  <!-- TOP FOREST -->
  <div class="forest-area">
    <img src="https://i.postimg.cc/s2V0k6gc/Freunde-und-Feinde-Eichhornchen.png" alt="">
  </div>

  <!-- FEEDBACK CENTER -->
  <div class="feedback-overlay" id="feedback">
    <img id="feedback-img" alt="">
  </div>

  <!-- ANIMALS BOTTOM -->
  <div class="bottom-row" id="bottom-row"></div>

</div>

<script>
const CARD_SIZE = 120;

const cardsData = [
  { id: 1, type: "freund", src: "https://i.postimg.cc/LY4JvcjD/1.png" },
  { id: 2, type: "freund", src: "https://i.postimg.cc/vg84XJ5N/2.png" },
  { id: 3, type: "freund", src: "https://i.postimg.cc/DJfS59qK/3.png" },
  { id: 4, type: "freund", src: "https://i.postimg.cc/Q9NFS2ps/4.png" },
  { id: 5, type: "freund", src: "https://i.postimg.cc/YG2v8517/5.png" },
  { id: 6, type: "freund", src: "https://i.postimg.cc/mzZPVvQL/6.png" },
  { id: 7, type: "freund", src: "https://i.postimg.cc/cg1vTpQH/7.png" },
  { id: 8, type: "freund", src: "https://i.postimg.cc/dkWLf5BF/8.png" },

  { id: 9, type: "feind", src: "https://i.postimg.cc/R6PNYgR4/9.png" },
  { id: 10, type: "feind", src: "https://i.postimg.cc/TLkpst9Y/10.png" },
  { id: 11, type: "feind", src: "https://i.postimg.cc/gXMn7gDz/11.png" },
  { id: 12, type: "feind", src: "https://i.postimg.cc/XG2pPs8v/12.png" },
  { id: 13, type: "feind", src: "https://i.postimg.cc/ZBfCQwcR/13.png" },
  { id: 14, type: "feind", src: "https://i.postimg.cc/dkWLf5BL/14.png" },
  { id: 15, type: "feind", src: "https://i.postimg.cc/JDTGFpqy/15.png" }
];

const bottomRow = document.getElementById("bottom-row");
const gameShell = document.getElementById("game-shell");
const feedback = document.getElementById("feedback");
const feedbackImg = document.getElementById("feedback-img");

const FEEDBACK = {
  falsch: "https://i.postimg.cc/zLsKJzHC/falsch.png",
  feind: "https://i.postimg.cc/p9wz2W5Y/feinde.png",
  freund: "https://i.postimg.cc/B8rHqSP5/freunde.png"
};

/* Populate bottom row */
cardsData.forEach(card => {
  const el = document.createElement("div");
  el.className = "card";
  el.dataset.type = card.type;

  const img = document.createElement("img");
  img.src = card.src;
  el.appendChild(img);

  bottomRow.appendChild(el);
  makeDraggable(el);
});

/* Drag logic */
function makeDraggable(card) {
  let offsetX, offsetY, startLeft, startTop;

  card.addEventListener("pointerdown", (e) => {
    e.preventDefault();

    const shellRect = gameShell.getBoundingClientRect();
    const rect = card.getBoundingClientRect();

    offsetX = e.clientX - rect.left;
    offsetY = e.clientY - rect.top;

    // Convert current position to absolute within game-shell
    startLeft = rect.left - shellRect.left;
    startTop  = rect.top - shellRect.top;

    card.style.position = "absolute";
    card.style.left = startLeft + "px";
    card.style.top  = startTop + "px";

    card.classList.add("dragging");
    card.setPointerCapture(e.pointerId);
  });

  card.addEventListener("pointermove", (e) => {
    if (!card.classList.contains("dragging")) return;

    const shellRect = gameShell.getBoundingClientRect();
    let x = e.clientX - shellRect.left - offsetX;
    let y = e.clientY - shellRect.top - offsetY;

    // keep inside board
    x = Math.max(0, Math.min(shellRect.width - CARD_SIZE, x));
    y = Math.max(0, Math.min(shellRect.height - CARD_SIZE, y));

    card.style.left = x + "px";
    card.style.top  = y + "px";
  });

  card.addEventListener("pointerup", (e) => {
    if (!card.classList.contains("dragging")) return;

    card.classList.remove("dragging");
    card.releasePointerCapture(e.pointerId);

    const shellRect = gameShell.getBoundingClientRect();
    const rect = card.getBoundingClientRect();
    const centerX = (rect.left + rect.right) / 2 - shellRect.left;

    const type = card.dataset.type;
    const mid = shellRect.width / 2;

    let result;
    if (centerX < mid && type === "feind") result = "feind";
    else if (centerX > mid && type === "freund") result = "freund";
    else result = "falsch";

    showPopup(result);
  });
}

/* Popup */
function showPopup(type) {
  feedbackImg.src = FEEDBACK[type];
  feedback.style.display = "flex";
}

feedbackImg.addEventListener("click", () => {
  feedback.style.display = "none";
});
</script>

</body>
</html>

